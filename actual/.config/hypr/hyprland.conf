# Hyprland Config guide
# https://wiki.hypr.land/Configuring/


#############
### THEME ###
#############

source = theme.conf
$wallpaper = $HOME/Media/Pictures/Wallpapers/astronaut.jpg


################
### MONITORS ###
################

# See https://wiki.hypr.land/Configuring/Monitors/
# monitor=eDP-1,1920x1080@60,0x0,1
# monitor=HDMI-A-1,1024x768@60.00400,1920x0,1

# nwg-displays
source = ~/.config/hypr/monitors.conf

workspace = 1, monitor:eDP-1, default:true, persistent:true
workspace = 4, monitor:HDMI-A-1, default:true, persistent:false
workspace = special:magic, monitor:HDMI-A-1, default:true, persistent:false

###################
### AUTOSTARTUP ###
###################

exec-once = waybar # Statusbar

exec-once = wl-paste --type text --watch cliphist store # Stores only text data
exec-once = wl-paste --type image --watch cliphist store # Stores only image data
# exec-once = copyq --start-server # GUI clipboard history

exec-once = swww-daemon # Wallpaper server
exec-once = swww img $wallpaper # Wallpaper

exec-once = systemctl --user start hyprpolkitagent # gui sudo prompt

# exec-once = dunst # Notifications
exec-once = swaync # Notifications

exec-once = udiskie # Mounter

exec-once = hypridle # For lock

exec-once = hyprpm reload # Hypr plugin manager (run hyprpm update)

exec-once = [workspace 1 silent] $TERMINAL

ecosystem {
    no_update_news = true
}


#############################
### ENVIRONMENT VARIABLES ###
#############################

# See https://wiki.hypr.land/Configuring/Environment-variables/

# At first, create symlink to cursor theme at /home/a1pha/.local/share/icons (e.g. from /usr/share/icons)
env = HYPRCURSOR_THEME, Bibata-Modern-Classic
env = HYPRCURSOR_SIZE, 24

env = XCURSOR_THEME, Bibata-Modern-Classic
env = XCURSOR_SIZE, 24

env = QT_AUTO_SCREEN_SCALE_FACTOR, 1
env = QT_QPA_PLATFORM, wayland;xcb
env = QT_WAYLAND_DISABLE_WINDOWDECORATION, 1
env = QT_QPA_PLATFORMTHEME, qt6ct

env = XDG_CURRENT_DESKTOP, Hyprland
env = XDG_SESSION_DESKTOP, Hyprland
env = XDG_SESSION_TYPE, wayland

env = SWWW_TRANSITION, any
env = SWWW_TRANSITION_FPS, 60
env = DEFAULT_WALLPAPER, $wallpaper


#####################
### LOOK AND FEEL ###
#####################

# See https://wiki.hypr.land/Configuring/Variables/#general
general {
    gaps_in = 2
    gaps_out = 4

    border_size = 1

    col.active_border = $color_border
    col.inactive_border = $color_border_inactive

    resize_on_border = true
    resize_corner = 3
    extend_border_grab_area = 3
    hover_icon_on_border = true

    allow_tearing = false

    layout = dwindle
}

# See https://wiki.hypr.land/Configuring/Variables/#group
group {
    auto_group = true
    insert_after_current = true
    focus_removed_window = true

    merge_groups_on_drag = true

    col.border_active = $color_border
    col.border_inactive = $color_border_inactive

    groupbar {
        enabled = true

        font_size = 12

        gradients = true
        height = 20
        stacked = false
        render_titles = true

        scrolling = true

        text_color = $color_fg
        col.active = $color_bg
        col.inactive = $color_bg_inactive
    }
}

# See https://wiki.hypr.land/Configuring/Variables/#decoration
decoration {
    rounding = 8
    rounding_power = 2

    active_opacity = 1.0
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0


    dim_inactive = false
    dim_strength = 0.2

    shadow {
        enabled = true
        range = 4

        ignore_window = true
        sharp = false

        render_power = 2
        color = rgba(1a1a1aee)

        offset = 0.0 0.0
        scale = 1.0
    }

    # See https://wiki.hypr.land/Configuring/Variables/#blur
    blur {
        enabled = true

        size = 10
        passes = 3

        xray = false

        ignore_opacity = true

        new_optimizations = true

        noise = 0
        contrast = 0.9
        brightness = 0.8
        vibrancy = 0.2
        vibrancy_darkness = 0.5

        special = false
        popups = true
        popups_ignorealpha = 0.2
    }
}

# See https://wiki.hypr.land/Configuring/Variables/#animations
animations {
    enabled = yes, please :)

    # Default curves, see https://wiki.hypr.land/Configuring/Animations/#curves
    #        NAME,           X0,   Y0,   X1,   Y1
    bezier = easeOutQuint,   0.23, 1,    0.32, 1
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
    bezier = linear,         0,    0,    1,    1
    bezier = almostLinear,   0.5,  0.5,  0.75, 1
    bezier = quick,          0.15, 0,    0.1,  1

    # Default animations, see https://wiki.hypr.land/Configuring/Animations/
    #           NAME,          ONOFF, SPEED, CURVE,        [STYLE]
    animation = global,        1,     10,    default
    animation = border,        1,     5.39,  easeOutQuint
    animation = windows,       1,     4.79,  easeOutQuint
    animation = windowsIn,     1,     4.1,   easeOutQuint, popin 87%
    animation = windowsOut,    1,     1.49,  linear,       popin 87%
    animation = fadeIn,        1,     1.73,  almostLinear
    animation = fadeOut,       1,     1.46,  almostLinear
    animation = fade,          1,     3.03,  quick
    animation = layers,        1,     3.81,  easeOutQuint
    animation = layersIn,      1,     4,     easeOutQuint, fade
    animation = layersOut,     1,     1.5,   linear,       fade
    animation = fadeLayersIn,  1,     1.79,  almostLinear
    animation = fadeLayersOut, 1,     1.39,  almostLinear
    animation = workspaces,    1,     1.94,  almostLinear, fade
    animation = workspacesIn,  1,     1.21,  almostLinear, fade
    animation = workspacesOut, 1,     1.94,  almostLinear, fade
    animation = zoomFactor,    1,     7,     quick
}

# See https://wiki.hypr.land/Configuring/Dwindle-Layout/
dwindle {
    pseudotile = true
    preserve_split = true
}

# See https://wiki.hypr.land/Configuring/Master-Layout/
master {
    new_status = master
}

# See https://wiki.hypr.land/Configuring/Variables/#misc
misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    disable_splash_rendering = true

    font_family = RobotoMono Nerd Font

    vfr = true
    vrr = 0
    disable_autoreload = false
}


############################
### WINDOW & LAYER RULES ###
############################

# See https://wiki.hypr.land/Configuring/Window-Rules/
# See https://wiki.hypr.land/Configuring/Workspace-Rules/
# For recognizing window classes inspect: hyprctl clients
# For recognizing layer namespaces inspect: hyprctl layers

windowrule = match:class .*, suppress_event maximize

windowrule = match:tag alpha-0.9, opacity 0.9

# Fix dragging issues with XWayland
windowrule = match:class ^$, match:title ^$, match:xwayland 1, match:float 1, match:fullscreen 0, match:pin 0, no_initial_focus on

$all = ^(.*)$
$wrule_idle = idle_inhibit fullscreen
windowrule = match:class $all, $wrule_idle
windowrule = match:title $all, $wrule_idle
windowrule = match:fullscreen 1, $wrule_idle

# INFO: check classes: hyprctl clients or hyprctl activewindow

$rofi = ^(rofi)$
windowrule = match:class $rofi, float on
windowrule = match:class $rofi, center on
windowrule = match:class $rofi, pin on
windowrule = match:class $rofi, border_size 0
windowrule = match:class $rofi, stay_focused on

$copyq = ^(com.github.hluk.copyq)$
windowrule = match:class $copyq, float on
windowrule = match:class $copyq, center on
windowrule = match:class $copyq, animation fade
windowrule = match:class $copyq, border_size 0
windowrule = match:class $copyq, size 400 600

$waypaper = ^(waypaper)$
windowrule = match:class $waypaper, float on
windowrule = match:class $waypaper, center on
windowrule = match:class $waypaper, animation fade
windowrule = match:class $waypaper, border_size 0
windowrule = match:class $waypaper, size 800 600

$flameshot = ^(flameshot)$
windowrule = match:class $flameshot, no_anim on
windowrule = match:class $flameshot, float on
windowrule = match:class $flameshot, move 0 0
windowrule = match:class $flameshot, pin on
# windowrule = match:class $flameshot, no_initial_focus on
windowrule = match:class $flameshot, size 1920 1080
# set this to your leftmost monitor id, otherwise you have to move your cursor to the leftmost monitor
# before executing flameshot
windowrule = match:class $flameshot, monitor 1

$dragon = ^(dragon-drop)$
windowrule = match:class $dragon, float on
windowrule = match:class $dragon, center on
windowrule = match:class $dragon, pin on

$logout = ^(logout_dialog)$
layerrule = match:namespace $logout, blur on


#############
### INPUT ###
#############

# See https://wiki.hypr.land/Configuring/Variables/#input
input {
    kb_layout = us, ru
    kb_variant =
    kb_model =
    # options list: $ grep "grp:.*toggle" /usr/share/X11/xkb/rules/base.lst
    kb_options = grp:caps_toggle, grp:alt_shift_toggle
    kb_rules =

    follow_mouse = 1

    sensitivity = 0 # [-1.0 - 1.0]

    touchpad {
        natural_scroll = true
    }
}

# See https://wiki.hypr.land/Configuring/Keywords/#per-device-input-configs
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

# See https://wiki.hypr.land/Configuring/Variables/#gestures
gesture = 3, down, mod: ALT, close
gesture = 3, up, mod: SUPER, scale: 1.5, fullscreen
gesture = 3, left, scale: 1.5, float


###############
### PLUGINS ###
###############

# hyprpm add
# See https://github.com/hyprwm/hyprland-plugins
# On appearing any issues: `hyprpm update`
plugin {
    hyprexpo {
        columns = 3
        gap_size = 1
        bg_col = rgb(000000)
        workspace_method = first 1
    }
    hyprscrolling {
        column_width = 0.5001
        fullscreen_on_one_column = true
        follow_focus = true
        focus_fit_method = 0
                         # 0 - center | 1 - fit
    }
    # See https://github.com/VirtCode/hypr-dynamic-cursors
    dynamic-cursors {
        enabled = true
        mode = none
             # tilt | rotate | stretch | none
        threshold = 2 # min angle in deg
        rotate {
            length = 20 # of simulated stick for rotation
                   # (px)
            offset = 0.0 # clockwise
        }
        tilt {
            limit = 5000 # speed, on which the full_tilt (60Â° in both directions) is reached
                  # (px/s)
            function = negative_quadratic # relationship between speed and tilt
                     # linear | quadratic | negative_quadratic
            window = 100 # time window over which the speed is calculated
                   # (ms)
        }
        stretch {
            limit = 3000 # speed, on which the full_stretch (2*orig_length) is reached
                  # (px/s)
            function = quadratic # relationship between speed and stretch
                     # linear | quadratic | negative_quadratic
            window = 100 # time window over which the speed is calculated
                   # (ms)
        }
        shake {
            enabled = true
            nearest = true # use nearest-neighbour pielated scaling
            threshold = 4.0
            base = 4.0 # magnification level on start
            speed = 4.0 # magnification level on shaking
            influence = 0.0 # of speed
            limit = 0.0 # max magnification
                  # (float) | [0.0; 1.0] - disable
            timeout = 2000 # stay after
                    # (ms)
            effects = false # show cursor behaviour while shaking
            ipc = false # ipc events
        }
        hyprcursor {
            enabled = true
            nearest = true # nearest-neghbour pixelated scaling
                    # 0 - never | 1 - when no highres | 2 - always
            resolution = -1 # resolution load the magnified shapes at
                       # (px) | -1 - [normal cursor size] * [shake:base option]
            fallback = clientside
        }
    }
}


###################
### KEYMAPPINGS ###
###################

# See https://wiki.hypr.land/Configuring/Variables/#binds
binds {
    scroll_event_delay = 0
    workspace_back_and_forth = true
}

# See https://wiki.hypr.land/Configuring/Keywords/
$mod = SUPER

# See https://wiki.hypr.land/Configuring/Binds/

# Applications
bind = $mod, T, exec, $TERMINAL
bind = $mod, B, exec, $BROWSER
bind = $mod, E, exec, $EXPLORER
bind = $mod, R, exec, ~/.scripts/open-runner.sh
bind = $mod, I, exec, ~/.scripts/open-settings.sh

# Utility
bind = $mod CTRL, R, exec, ~/.scripts/reload.sh
bind = $mod CTRL, P, exec, ~/.scripts/open-power-menu.sh
bind = $mod CTRL, M, exec, ~/.scripts/open-system-monitor.sh
bind = CTRL SHIFT, escape, exec, ~/.scripts/open-system-monitor.sh
bind = $mod CTRL, B, exec, ~/.scripts/open-bluetooth-manager.sh
bind = $mod CTRL, N, exec, ~/.scripts/open-network-manager.sh
bind = $mod CTRL, S, exec, ~/.scripts/open-sound-playback-manager.sh
bind = $mod CTRL, L, exec, ~/.scripts/lock.sh
bind = $mod CTRL SHIFT, W, exec, ~/.scripts/set-default-wallpaper.sh
bind = $mod CTRL, W, exec, ~/.scripts/open-wallpaper-manager.sh

bind = $mod, P, exec, ~/.scripts/open-wallpaper-manager.sh

bind = $mod SHIFT, C, exec, ~/.scripts/open-color-picker.sh
bind = $mod, semicolon, exec, ~/.scripts/open-emoji-picker.sh

bind = $mod SHIFT, S, exec, ~/.scripts/screenshot.sh

# source: https://wiki.hyprland.org/Useful-Utilities/Clipboard-Managers/
bind = $mod, V, exec, ~/.scripts/open-clipboard.sh

bind = $mod, TAB, hyprexpo:expo, toggle # plugin for showing all workspaces

# Window
bind = $mod, F, togglefloating,
bind = $mod, Z, pseudo,
bind = $mod, return, fullscreen

bind = $mod, Q, killactive,
bind = $mod SHIFT, Q, forcekillactive,

bind = $mod, H, movefocus, l
bind = $mod, L, movefocus, r
bind = $mod, K, movefocus, u
bind = $mod, J, movefocus, d

source = ~/.config/hypr/lo-dwindle-keymappings.conf

# Workspace
bind = $mod, bracketleft, workspace, -1
bind = $mod, bracketright, workspace, +1
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, M, togglespecialworkspace, magic

bind = $mod SHIFT, bracketleft, movetoworkspace, -1
bind = $mod SHIFT, bracketright, movetoworkspace, +1
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, M, movetoworkspace, special:magic

bind = $mod CTRL SHIFT, bracketleft, movetoworkspacesilent, -1
bind = $mod CTRL SHIFT, bracketright, movetoworkspacesilent, +1
bind = $mod CTRL SHIFT, 1, movetoworkspacesilent, 1
bind = $mod CTRL SHIFT, 2, movetoworkspacesilent, 2
bind = $mod CTRL SHIFT, 3, movetoworkspacesilent, 3
bind = $mod CTRL SHIFT, 4, movetoworkspacesilent, 4
bind = $mod CTRL SHIFT, 5, movetoworkspacesilent, 5
bind = $mod CTRL SHIFT, 6, movetoworkspacesilent, 6
bind = $mod CTRL SHIFT, 7, movetoworkspacesilent, 7
bind = $mod CTRL SHIFT, 8, movetoworkspacesilent, 8
bind = $mod CTRL SHIFT, M, movetoworkspacesilent, special:magic

# Layout
bind = $mod CTRL, backslash, exec, ~/.config/hypr/scripts/swap-layout.sh

# Groups
bind = $mod CTRL, T, togglegroup
bind = $mod CTRL, bracketleft, changegroupactive, b
bind = $mod CTRL, bracketright, changegroupactive, f
bind = $mod CTRL, 9, movegroupwindow, b
bind = $mod CTRL, 0, movegroupwindow, f

bind = $mod CTRL, up, movewindoworgroup, u
bind = $mod CTRL, right, movewindoworgroup, r
bind = $mod CTRL, down, movewindoworgroup, d
bind = $mod CTRL, left, movewindoworgroup, l

bind = $mod CTRL, 1, changegroupactive, 1
bind = $mod CTRL, 2, changegroupactive, 2
bind = $mod CTRL, 3, changegroupactive, 3
bind = $mod CTRL, 4, changegroupactive, 4
bind = $mod CTRL, 5, changegroupactive, 5
bind = $mod CTRL, 6, changegroupactive, 6
bind = $mod CTRL, 7, changegroupactive, 7
bind = $mod CTRL, 8, changegroupactive, 8


#####################
### MOUSEMAPPINGS ###
#####################

$mouse_u = mouse_up
$mouse_r = mouse_right
$mouse_d = mouse_down
$mouse_l = mouse_left
$mouse_lb = mouse:272
$mouse_rb = mouse:273
$mouse_mb = mouse:274
$mouse_back = mouse:275
$mouse_forward = mouse:276

# Scroll through existing workspaces with mainMod + scroll
bind = $mod, $mouse_d, workspace, e+1
bind = $mod, $mouse_u, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mod, $mouse_lb, movewindow
bindm = $mod, $mouse_rb, resizewindow


##################
### FNMAPPINGS ###
##################

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

bindel = ,XF86MonBrightnessUp, exec, brightnessctl -q s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -q s 10%-

bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous
