############
### FONT ###
############

font_family JetBrains Mono Nerd Font

font_size 10.5
disable_ligatures never


##############
### CURSOR ###
##############

cursor_shape beam
cursor_beam_thickness 2.0
cursor_underline_thickness 2.0
cursor_trail 1


#############
### MOUSE ###
#############

mouse_hide_wait 3.0
click_interval -1.0
focus_follows_mouse no
url_style straight
detect_urls yes
show_hyperlink_targets yes


#################
### CLIPBOARD ###
#################

copy_on_select no
strip_trailing_spaces smart
select_by_word_characters @-./_~?&=%+#


############
### BELL ###
############

enable_audio_bell no
visual_bell_duration 0.0
window_alert_on_bell yes
bell_on_tab "ï‘¶ "


#####################
### WINDOW LAYOUT ###
#####################

remember_window_size no
initial_window_width 800
initial_window_height 500
window_border_width 1pt

window_margin_width 1
window_padding_width 0
single_window_margin_width -1
single_window_padding_width -1

enabled_layouts splits,grid,fat,tall
confirm_os_window_close -1


###############
### TAB BAR ###
###############

tab_bar_margin_width 0.0
tab_bar_margin_height 2.0 2.0
tab_bar_edge top
tab_bar_align left

tab_bar_style separator
tab_separator " "

tab_title_max_length 0
# tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{tab.last_focused_progress_percent}{title}"
tab_title_template "{fmt.bg._1d99f3}{fmt.fg.black} {index} {fmt.bg.tab} {fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{title} "
# tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{title}"
active_tab_title_template  "{fmt.bg._f67400}{fmt.fg.black} {index} {fmt.bg.tab} {fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{title} "

active_tab_font_style bold
inactive_tab_font_style normal


####################
### COLOR SCHEME ###
####################

include custom-theme.conf

background_opacity 1
dynamic_background_opacity yes
background_blur 0

background_image none
background_image_layout cscaled
background_image_linear no
background_tint 0.6


################
### ADVANCED ###
################

editor /usr/bin/env nvim

# For kitty-scrollback set socket-only
allow_remote_control socket-only
# For kitty-scrollback. Cmd: nvim --headless +'KittyScrollbackGenerateKittens'
listen_on unix:/tmp/kitty

update_check_interval 0

# For kitty scrollback avoid no-prompt-mark
shell_integration enabled,no-cursor,no-title,no-complete

notify_on_cmd_finish invisible 5 notify


#################
### OS TWEAKS ###
#################

linux_display_server wayland
wayland_enable_ime no


###################
### KEYMAPPINGS ###
###################

clear_all_shortcuts yes
kitty_mod ctrl+shift

# General
map kitty_mod+r load_config_file
map kitty_mod+p edit_config_file
map kitty_mod+d debug_config
map kitty_mod+; kitty_shell os_window
map kitty_mod+u kitten unicode_input
map kitty_mod+o open_url_with_hints

# Clipboard
map kitty_mod+c copy_to_clipboard
map kitty_mod+v paste_from_clipboard

# Scrollback
action_alias scrollback_nvim kitten ~/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py --env NVIM_APPNAME=nvim-ksb
# action_alias scrollback_nvim kitten ~/.local/share/nvim/lazy/kitty-scrollback.nvim/python/kitty_scrollback_nvim.py --nvim-args --clean --noplugin -n
map kitty_mod+[ scrollback_nvim

# Font size
map kitty_mod+f>' change_font_size all +1.0
map kitty_mod+f>; change_font_size all -1.0
map kitty_mod+f>/ change_font_size all 0

# Opacity
map kitty_mod+b launch --type overlay "kitten @ set-background-opacity --toggle 0.8125"
# floating point problem: works good with n/2^m (or set to 1 and change default)

# Window
map kitty_mod+w>s launch --cwd=current --location=vsplit
map kitty_mod+w>v launch --cwd=current --location=hsplit
map kitty_mod+q close_window

map kitty_mod+h neighboring_window left
map kitty_mod+j neighboring_window down
map kitty_mod+k neighboring_window up
map kitty_mod+l neighboring_window right
map kitty_mod+backspace nth_window -1

map kitty_mod+left move_window left
map kitty_mod+down move_window down
map kitty_mod+up move_window up
map kitty_mod+right move_window right

map kitty_mod+= resize_window taller
map kitty_mod+- resize_window shorter
map kitty_mod+. resize_window wider
map kitty_mod+, resize_window narrower

# Layouts
map kitty_mod+\ next_layout

# Tabs
map ctrl+alt+t new_tab_with_cwd
map ctrl+alt+w close_tab

map ctrl+alt+n set_tab_title

map ctrl+alt+] next_tab
map ctrl+alt+[ previous_tab

map ctrl+alt+1 goto_tab 1
map ctrl+alt+2 goto_tab 2
map ctrl+alt+3 goto_tab 3
map ctrl+alt+4 goto_tab 4
map ctrl+alt+5 goto_tab 5
map ctrl+alt+6 goto_tab 6
map ctrl+alt+7 goto_tab 7
map ctrl+alt+8 goto_tab 8

map ctrl+alt+0 move_tab_forward
map ctrl+alt+9 move_tab_backward
